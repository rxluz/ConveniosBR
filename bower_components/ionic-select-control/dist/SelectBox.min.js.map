{"version":3,"sources":["SelectBox.js"],"names":["_template","join","angular","module","directive","restrict","require","template","scope","ngSelectedValue","ngTitle","ngItemName","ngItemId","ngData","ngPlaceholder","ngHeaderClass","ngSelectChanged","controller","$scope","$element","$ionicModal","$parse","label","showSelectModal","val","ngDataObjects","$parent","renderModal","modal","show","closeSelectModal","hide","$on","id","remove","$watch","newValue","oldValue","element","children","innerText","undefined","i","len","length","setPlaceholderLabel","fromTemplate","animation","backdropClickToClose","clickItem","item","selectedValue","compile","input","find","forEach","name","ng-model","value","isDefined","attr"],"mappings":"CAAA,WAEI,GAAIA,IACA,uDACA,0CACA,0CACA,yBACA,UACFC,KAAK,KAEPC,SAAQC,OAAO,iBAAkBC,UAAU,YAAa,WAEpD,OACIC,SAAU,IACVC,SAAU,WACVC,SAAUP,EACVQ,OACIC,gBAAiB,IACjBC,QAAS,IACTC,WAAY,IACZC,SAAU,IACVC,OAAQ,IACRC,cAAe,IACfC,cAAe,IACfC,gBAAiB,KAErBC,YAAa,SAAU,WAAY,cAAe,SAAU,SAAUC,EAAQC,EAAUC,EAAaC,GAEjGH,EAAOJ,cAAiBI,EAAoB,cAAIA,EAAOJ,cAAgB,GACvEI,EAAOI,MAAQJ,EAAOJ,cAEtBI,EAAOK,gBAAkB,WACrB,GAAIC,GAAMH,EAAOH,EAAOL,OACxBK,GAAOO,cAAgBD,EAAIN,EAAOQ,SAClCR,EAAOH,cAAiBG,EAAoB,cAAIA,EAAOH,cAAgB,GACvEG,EAAOS,cACPT,EAAOU,MAAMC,QAGjBX,EAAOY,iBAAmB,WACnBZ,EAAOU,OACNV,EAAOU,MAAMG,QAGrBb,EAAOc,IAAI,WAAY,SAAUC,GAC1Bf,EAAOU,OACNV,EAAOU,MAAMM,WAGrBhB,EAAOiB,OAAO,gBAAiB,SAAUC,EAAUC,GAC/CnC,QAAQoC,QAAQnB,EAASoB,WAAW,IAAIA,WAAW,GAAGC,UAAYJ,IAGtElB,EAAOiB,OAAO,kBAAmB,SAAUC,EAAUC,GAEpD,GAAGI,QAAaL,EAAU,CACxB,GAAIZ,GAAMH,EAAOH,EAAOL,OACxBK,GAAOO,cAAgBD,EAAIN,EAAOQ,QAElC,KADA,GAAIgB,GAAE,EAAGC,EAAIzB,EAAOO,cAAcmB,OACzBD,EAAFD,EAAOA,IACRxB,EAAOO,cAAciB,GAAGxB,EAAON,WAAawB,GAE9ClB,EAAO2B,oBAAoB3B,EAAOO,cAAciB,GAAGxB,EAAOP,iBAI5DO,GAAO2B,oBAAoB3B,EAAOJ,iBAGvCI,EAAOS,YAAc,WACjBT,EAAOU,MAAQR,EAAY0B,aAAa,sDACN5B,EAAOH,cAAgB,uBAC5BG,EAAOR,QAAU,8NAKgEQ,EAAOP,WAAa,+DAI9HH,MAAOU,EACP6B,UAAW,iBACXC,sBAAuB,KAI/B9B,EAAO+B,UAAY,SAAUC,GACzBhC,EAAOT,gBAAkByC,EAAKhC,EAAON,UACrCM,EAAOI,MAAQ4B,EAAKhC,EAAOP,YAC3BO,EAAOY,mBACPZ,EAAOF,iBAAiBmC,cAAejC,EAAOT,mBAGlDS,EAAO2B,oBAAsB,SAASvB,GAClCJ,EAAOI,MAASA,GAGpBJ,EAAOc,IAAI,QAAS,WAChBd,EAAO2B,oBAAoB3B,EAAOJ,eAClCI,EAAOT,gBAAkB,SAGjC2C,QAAS,SAAUjC,EAAUD,GACzB,GAAImC,GAAQlC,EAASmC,KAAK,iBAC1BpD,SAAQqD,SACJC,KAAQtC,EAAOsC,KACfC,WAAYvC,EAAOT,iBACpB,SAAUiD,EAAOF,GACZtD,QAAQyD,UAAUD,IAClBL,EAAMO,KAAKJ,EAAME","file":"SelectBox.min.js","sourcesContent":["(function(){\r\n\r\n    var _template = [\r\n        \"<div class='selectBox' ng-click='showSelectModal()'>\",\r\n        \"<span class='selected'>{{label}}</span>\",\r\n        \"<span class='selectArrow'>&#9660</span>\",\r\n        \"<input type='hidden'/>\",\r\n        \"</div>\"\r\n    ].join(\"\\n\");\r\n\r\n    angular.module('$selectBox', []).directive('selectBox', function () {\r\n\r\n        return {\r\n            restrict: 'E',\r\n            require: ['ngModel' ],\r\n            template: _template,\r\n            scope: {\r\n                ngSelectedValue: \"=\",\r\n                ngTitle: \"@\",\r\n                ngItemName: \"@\",\r\n                ngItemId: \"@\",\r\n                ngData: \"@\",\r\n                ngPlaceholder: \"@\",\r\n                ngHeaderClass: \"@\",\r\n                ngSelectChanged: \"&\"\r\n            },\r\n            controller: ['$scope', '$element', '$ionicModal', '$parse', function ($scope, $element, $ionicModal, $parse) {\r\n\r\n                $scope.ngPlaceholder = ($scope.ngPlaceholder) ? $scope.ngPlaceholder : '';\r\n                $scope.label = $scope.ngPlaceholder;\r\n\r\n                $scope.showSelectModal = function () {\r\n                    var val = $parse($scope.ngData);\r\n                    $scope.ngDataObjects = val($scope.$parent);\r\n                    $scope.ngHeaderClass = ($scope.ngHeaderClass) ? $scope.ngHeaderClass : \"\";\r\n                    $scope.renderModal();\r\n                    $scope.modal.show();\r\n                };\r\n\r\n                $scope.closeSelectModal = function () {\r\n                    if($scope.modal)\r\n                        $scope.modal.hide();\r\n                };\r\n\r\n                $scope.$on('$destroy', function (id) {\r\n                    if($scope.modal)\r\n                        $scope.modal.remove();\r\n                });\r\n\r\n                $scope.$watch('ngPlaceholder', function (newValue, oldValue) {\r\n                    angular.element($element.children()[0]).children()[0].innerText = newValue;\r\n                });\r\n\r\n                $scope.$watch('ngSelectedValue', function (newValue, oldValue) {\r\n                  //console.log('selected value changed from ', oldValue, ' to ', newValue);\r\n                 if(undefined != newValue) {\r\n                   var val = $parse($scope.ngData);\r\n                   $scope.ngDataObjects = val($scope.$parent);\r\n                   var i=0, len=$scope.ngDataObjects.length;\r\n                   for (; i<len; i++) {\r\n                     if ($scope.ngDataObjects[i][$scope.ngItemId] == newValue) {\r\n                       //console.log('found descr for ', newValue, ' = ',$scope.ngDataObjects[i][$scope.ngItemName]);\r\n                       $scope.setPlaceholderLabel($scope.ngDataObjects[i][$scope.ngItemName]);\r\n                     }\r\n                   }\r\n                   } else\r\n                     $scope.setPlaceholderLabel($scope.ngPlaceholder);\r\n                });\r\n\r\n                $scope.renderModal = function () {\r\n                    $scope.modal = $ionicModal.fromTemplate('<ion-modal-view id=\"select\">'\r\n                        + '<ion-header-bar class=\"' + $scope.ngHeaderClass + '\">'\r\n                        + '<h1 class=\"title\">' + $scope.ngTitle + '</h1>'\r\n                        + ' <a ng-click=\"closeSelectModal()\" class=\"button button-icon icon ion-close\"></a>'\r\n                        + '</ion-header-bar>'\r\n                        + '<ion-content>'\r\n                        + '<ion-list>'\r\n                        + '<ion-item  ng-click=\"clickItem(item);' + '\" ng-repeat=\"item in ngDataObjects\" ng-bind-html=\"item[\\'' + $scope.ngItemName + '\\']\"></ion-item>'\r\n                        + '</ion-list>'\r\n                        + ' </ion-content>'\r\n                        + '</ion-modal-view>', {\r\n                        scope: $scope,\r\n                        animation: 'slide-in-right',\r\n                        backdropClickToClose : false\r\n                    });\r\n                };\r\n\r\n                $scope.clickItem = function (item) {\r\n                    $scope.ngSelectedValue = item[$scope.ngItemId];\r\n                    $scope.label = item[$scope.ngItemName];\r\n                    $scope.closeSelectModal();\r\n                    $scope.ngSelectChanged({selectedValue: $scope.ngSelectedValue});\r\n                };\r\n\r\n                $scope.setPlaceholderLabel = function(label) {\r\n                    $scope.label =  label;\r\n                };\r\n\r\n                $scope.$on('reset', function(){\r\n                    $scope.setPlaceholderLabel($scope.ngPlaceholder);\r\n                    $scope.ngSelectedValue = null;\r\n                });\r\n            }],\r\n            compile: function ($element, $scope) {\r\n                var input = $element.find('input.selected');\r\n                angular.forEach({\r\n                    'name': $scope.name,\r\n                    'ng-model': $scope.ngSelectedValue\r\n                }, function (value, name) {\r\n                    if (angular.isDefined(value)) {\r\n                        input.attr(name, value);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    });\r\n//# sourceMappingURL=selectBox.js.map\r\n})();\r\n"],"sourceRoot":"/source/"}